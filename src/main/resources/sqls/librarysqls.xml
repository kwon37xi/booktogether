<?xml version="1.0" encoding="utf-8"?>

<sqls name="library">

	<sql name="GET_LIBRARY_SQL">
		<description>서재 정보 가지고 오기</description>
		<query>
            <![CDATA[
             SELECT L.idNUm as idNum
                    ,L.notice as notice
                    ,L.isOpen as isOpen
                    ,U.idNum as uidNum
               FROM LIBRARY L, USER U 
              WHERE L.user_idNum = U.idNum 
              	AND U.user_id = ? 
                AND U.isdelete = 0 
            ]]>
		</query>
	</sql>


	<sql name="MODIFY_LIBRARY_SQL">
		<description>내서재 정보 수정하기</description>
		<query>
            <![CDATA[
             UPDATE LIBRARY 
                SET notice = ?
                    ,isOpen = ? 
              WHERE user_IdNum=? 
                AND idNum = ?  
            ]]>
		</query>
	</sql>


	<sql name="INSERT_LIBRARY_SQL">
		<description>내서재 정보 등록</description>
		<query>
            <![CDATA[
             INSERT INTO LIBRARY(user_idNum, notice, isOpen)  
             VALUES (?, ?, ?) 
            ]]>
		</query>
	</sql>
	
	
	<sql name="INSERT_LIBRARYBOOK_SQL">
		<description>서재에 책 등록</description>
		<query>
            <![CDATA[
             INSERT INTO LIBRARYBOOK(book_idNum
             						 , library_idNum
             						 , read_Date
             						 , state
             						 , ispossess)   
             VALUES (?, ?, ?, ?, ?) 
            ]]>
		</query>
	</sql>
	
	
	<sql name="LIST_LIBRARYBOOK_SQL">
		<description>서재에 책 목록</description>
		<query>
            <![CDATA[
             SELECT idnum
                    ,read_date
                    ,state
                    ,ispossess
                    ,book_idNum as bidnum
                    ,library_idNum as lidnum 
               FROM LIBRARYBOOK 
              WHERE state = ? 
                AND library_idNum = ? 
              LIMIT ?, ?
            ]]>
		</query>
	</sql>
	
	
	<sql name="GET_DUPLICATE_LIBRARYBOOK_SQL">
		<description>서재에 해당책이 있는지 검사</description>
		<query>
            <![CDATA[
             SELECT COUNT(*) as count 
               FROM LIBRARYBOOK 
              WHERE library_IdNum= ? 
                AND book_IdNum = ? 
            ]]>
		</query>
	</sql>
	
	
	<sql name="MODIFY_LIBRARYBOOK_SQL">
		<description>서재에 해당책 수정하기</description>
		<query>
            <![CDATA[
             UPDATE LIBRARYBOOK 
                SET state = ? 
                    ,read_date = ?
                    ,ispossess = ?
              WHERE library_idNum = ?
                AND book_idNum = ?
                AND idNum = ? 
            ]]>
		</query>
	</sql>
	
	
	<sql name="GET_LIBRARYBOOK_SQL">
		<description>서재에 해당책 조회</description>
		<query>
            <![CDATA[
             SELECT idnum
                    ,read_date
                    ,state
                    ,ispossess
                    ,book_idNum as bidnum
                    ,library_idNum as lidnum 
               FROM LIBRARYBOOK 
              WHERE idNum = ?
            ]]>
		</query>
	</sql>
	


</sqls>