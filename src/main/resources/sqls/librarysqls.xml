<?xml version="1.0" encoding="utf-8"?>

<sqls name="library">

	<sql name="GET_LIBRARY_SQL">
		<description>서재 정보 가지고 오기</description>
		<query>
            <![CDATA[
             SELECT L.idNUm as idNum
                    ,L.notice as notice
                    ,L.isOpen as isOpen
                    ,U.idNum as uidNum
                    ,U.name as uname
                    ,U.nickname as unickname
                    ,U.user_id as uid
                    ,UAI.thumnail as thumnail
               FROM LIBRARY L, USER U, USERADDINFO UAI 
              WHERE L.user_idNum = U.idNum 
              	AND U.user_id = ? 
                AND U.isdelete = 0 
                AND U.idNum = UAI.user_idNum 
            ]]>
		</query>
	</sql>


	<sql name="GET_LIBRARY_IDNUM_SQL">
		<description>서재 정보 가지고 오기</description>
		<query>
            <![CDATA[
             SELECT L.idNUm as idNum
                    ,L.notice as notice
                    ,L.isOpen as isOpen
                    ,U.idNum as uidNum
                    ,U.name as uname
                    ,U.nickname as unickname
                    ,U.user_id as uid
                    ,UAI.thumnail as thumnail
               FROM LIBRARY L, USER U, USERADDINFO UAI 
              WHERE L.user_idNum = U.idNum 
              	AND L.idNum = ? 
                AND U.isdelete = 0 
                AND U.idNum = UAI.user_idNum 
            ]]>
		</query>
	</sql>


	<sql name="MODIFY_LIBRARY_SQL">
		<description>내서재 정보 수정하기</description>
		<query>
            <![CDATA[
             UPDATE LIBRARY 
                SET notice = ?
                    ,isOpen = ? 
              WHERE user_IdNum=? 
                AND idNum = ?  
            ]]>
		</query>
	</sql>


	<sql name="INSERT_LIBRARY_SQL">
		<description>내서재 정보 등록</description>
		<query>
            <![CDATA[
             INSERT INTO LIBRARY(user_idNum, notice, isOpen)  
             VALUES (?, ?, ?) 
            ]]>
		</query>
	</sql>

	<sql name="LIST_SEARCH_LIBRARY_SQL">
		<description>서재 검색</description>
		<query>
            <![CDATA[
             SELECT U.idNum as idnum
             		,U.user_id as user_id
             		,U.email as email
             		,U.nickname as nickname
             		,U.name as name
             		,U.isdelete as isdelete
             		,U.input_date as input_date
             		,UAI.idNum as uai_idnum
             		,UAI.blog as blog
             		,UAI.thumnail as thumnail 
               FROM LIBRARY L, USER U, USERADDINFO UAI 
              WHERE L.user_idNum = U.idNum
                AND U.idNum = UAI.user_idNum 
                AND (
                	 U.user_id LIKE ?
		     		 OR U.name LIKE ? 
                     OR U.nickname LIKE ? 
                    )
                AND L.isopen=0
              ORDER BY U.input_date DESC
            ]]>
		</query>
	</sql>
</sqls>