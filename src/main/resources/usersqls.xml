<?xml version="1.0" encoding="utf-8"?>

<sqls name="user">

	<sql name="INSERT_USER_SQL">
        <description>사용자 등록</description>
        <query>
            <![CDATA[
             INSERT INTO USER(user_id, email, nickname, name, delete_y_n, input_date) 
             VALUES (?, ?, ?, ?, 0, now())
            ]]>
        </query>
    </sql>
    
	<sql name="INSERT_USER_PW_SQL">
        <description>사용자 비밀번호 인증키 등록(SALT)</description>
        <query>
            <![CDATA[
             INSERT INTO USER_PW(user_id, pw, salt) 
             VALUES(?, ?, ?) 
            ]]>
        </query>
    </sql>
    
    
	<sql name="GET_USER_SQL">
        <description>사용자 정보 조회(삭제된사람 포함)</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date 
             FROM USER 
             WHERE ID=? 
            ]]>
        </query>
    </sql>
    
	<sql name="GET_USER_PW_SQL">
        <description>사용자 암호 조회</description>
        <query>
            <![CDATA[
             SELECT user_id, salt, pw 
             FROM USER_PW 
             WHERE user_id=?
            ]]>
        </query>
    </sql>
    
	<sql name="EXIST_USER_SQL">
        <description>사용자 정보 조회(삭제 된사람 포함하지 않음)</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date 
             FROM USER  
             WHERE user_id=? AND delete_y_n=0
            ]]>
        </query>
    </sql>
    
	<sql name="MODIFY_USER_SQL">
        <description>사용자 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE USER 
             SET email=? 
	             ,nickname=? 
	             ,name=? 
	         WHERE id=? 
            ]]>
        </query>
    </sql>
    
	<sql name="MODIFY_USER_PW_SQL">
        <description>사용자 인증 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE USER_PW 
             SET digest=?  
	             ,salt=?  
	         WHERE user_id=? 
            ]]>
        </query>
    </sql>
    
    
	<sql name="DELETE_USER_SQL">
        <description>회원탈퇴</description>
        <query>
            <![CDATA[
             UPDATE USER 
             SET delete_y_n=1  
             WHERE id= ? 
            ]]>
        </query>
    </sql>
    
    
	<sql name="DBCOUNT_USER_SQL">
        <description>사용자 총 갯수</description>
        <query>
            <![CDATA[
             SELECT count(*) 
             FROM USER 
            ]]>
        </query>
    </sql>
    
    
	<sql name="LIST_USER_SQL">
        <description>사용자 목록</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date 
             FROM USER 
             LIMIT ?, ?
            ]]>
        </query>
    </sql>
    
    <sql name="GET_LAST_NUM">
        <description></description>
        <query>
            <![CDATA[
             SELECT LAST_INSERT_ID() as last_num;
            ]]>
        </query>
    </sql>
    
    
    <sql name="FIND_USER_ID_SQL">
        <description>사용자 ID찾기</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date 
             FROM USER 
             WHERE name=?
               AND email=? 
               AND delete_y_n=0 
            ]]>
        </query>
    </sql>
    
    
    <sql name="FIND_USER_ID_SQL">
        <description>사용자 PW찾기</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date  
             FROM USER 
             WHERE user_id = ? 
               AND name = ? 
               AND email = ? 
               AND delete_y_n = 0 
            ]]>
        </query>
    </sql>
    
    
</sqls>