<?xml version="1.0" encoding="utf-8"?>

<sqls name="user">

	<sql name="INSERT_USER_SQL">
        <description>사용자 등록</description>
        <query>
            <![CDATA[
             INSERT INTO USER(user_id, email, nickname, name, delete_y_n, input_date) 
             VALUES (?, ?, ?, ?, 0, now())
            ]]>
        </query>
    </sql>
    
	<sql name="INSERT_USER_PW_SQL">
        <description>사용자 비밀번호 인증키 등록(SALT)</description>
        <query>
            <![CDATA[
             INSERT INTO USER_PW(user_id, pw, salt) 
             VALUES(?, ?, ?) 
            ]]>
        </query>
    </sql>
    
	<sql name="INSERT_USERADDINFO_SQL">
        <description>사용자 추가정보 등록</description>
        <query>
            <![CDATA[
             INSERT INTO USERADDINFO(user_id, blog, thumnail) 
             VALUES(?, ?, ?) 
            ]]>
        </query>
    </sql>
    
	<sql name="INSERT_ZONE_SQL">
        <description>사용자 생활반경</description>
        <query>
            <![CDATA[
             INSERT INTO ZONE(user_id, zone) 
             VALUES(?, ?) 
            ]]>
        </query>
    </sql>
    
    
	<sql name="GET_USER_SQL">
        <description>사용자 정보 조회(삭제된사람 포함)</description>
        <query>
            <![CDATA[
             SELECT U.id
                    ,U.user_id as user_id 
                    ,U.email as email 
                    ,U.nickname as nickname 
                    ,U.name as name
                    ,U.delete_y_n as delete_y_n 
                    ,U.input_date as input_date
                    ,UAI.id as uai_id 
                    ,UAI.blog as blog 
                    ,UAI.thumnail as thumnail 
             FROM USER U, USERADDINFO UAI 
             WHERE U.id=UAI.user_id  
               AND U.id=? 
               AND U.delete_y_n=0
            ]]>
        </query>
    </sql>
    
    
	<sql name="GET_ZONE_SQL">
        <description>지역명 가지고 오기</description>
        <query>
            <![CDATA[
             SELECT id 
             		,user_id 
             		,zone 
             FROM ZONE 
             WHERE user_id=? 
            ]]>
        </query>
    </sql>
    
	<sql name="GET_USER_PW_SQL">
        <description>사용자 암호 조회</description>
        <query>
            <![CDATA[
             SELECT user_id, salt, pw 
             FROM USER_PW 
             WHERE user_id=?
            ]]>
        </query>
    </sql>
    
	<sql name="EXIST_USER_SQL">
        <description>해당 사용자가 있는지 조회</description>
        <query>
            <![CDATA[
             SELECT U.id
                    ,U.user_id as user_id 
                    ,U.email as email 
                    ,U.nickname as nickname 
                    ,U.name as name
                    ,U.delete_y_n as delete_y_n 
                    ,U.input_date as input_date
                    ,UAI.id as uai_id 
                    ,UAI.blog as blog 
                    ,UAI.thumnail as thumnail 
             FROM USER U, USERADDINFO UAI 
             WHERE U.id=UAI.user_id  
               AND U.user_id=? 
            ]]>
        </query>
    </sql>
    
    
	<sql name="DUPLICATE_USER_ID_SQL">
        <description>아이디 중복확인</description>
        <query>
            <![CDATA[
             SELECT count(*)  
               FROM USER 
              WHERE delete_y_n=0 
                AND user_id=? 
            ]]>
        </query>
    </sql>
    
	<sql name="MODIFY_USER_SQL">
        <description>사용자 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE USER 
             SET email=? 
	             ,nickname=? 
	             ,name=? 
	         WHERE id=? 
            ]]>
        </query>
    </sql>
    
    
	<sql name="MODIFY_USERADDINFO_SQL">
        <description>사용자 기본 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE USERADDINFO 
             SET blog=? 
	             ,thumnail=? 
	         WHERE id=? 
            ]]>
        </query>
    </sql>
    
	<sql name="MODIFY_USER_PW_SQL">
        <description>사용자 인증 정보 수정</description>
        <query>
            <![CDATA[
             UPDATE USER_PW 
             SET pw=?  
	             ,salt=?  
	         WHERE user_id=? 
            ]]>
        </query>
    </sql>
    
    
	<sql name="DELETE_USER_SQL">
        <description>회원탈퇴</description>
        <query>
            <![CDATA[
             UPDATE USER 
             SET delete_y_n=1  
             WHERE id= ? 
            ]]>
        </query>
    </sql>
    
    
	<sql name="DELETE_ZONE_SQL">
        <description>지역명 삭제</description>
        <query>
            <![CDATA[
            DELETE FROM ZONE 
            WHERE id = ?
              AND user_id = ?
            ]]>
        </query>
    </sql>
    
    
	<sql name="DBCOUNT_USER_SQL">
        <description>사용자 총 갯수</description>
        <query>
            <![CDATA[
             SELECT count(*) 
             FROM USER 
            ]]>
        </query>
    </sql>
    
    
	<sql name="LIST_USER_SQL">
        <description>사용자 목록</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date 
             FROM USER 
             LIMIT ?, ?
            ]]>
        </query>
    </sql>
    
    
	<sql name="LIST_ZIPCODE_SQL">
        <description>주소찾기</description>
        <query>
            <![CDATA[
             SELECT seq
             	    ,sido
             	    ,gugun
             	    ,dong
               FROM ZIPCODE
              WHERE sido  LIKE ?
                 OR gugun LIKE ?
                 OR dong  LIKE ?
            ]]>
        </query>
    </sql>
    
    <sql name="GET_LAST_NUM">
        <description></description>
        <query>
            <![CDATA[
             SELECT LAST_INSERT_ID() as last_num;
            ]]>
        </query>
    </sql>
    
    
    <sql name="FIND_USER_ID_SQL">
        <description>사용자 ID찾기</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date 
             FROM USER 
             WHERE name=?
               AND email=? 
               AND delete_y_n=0 
            ]]>
        </query>
    </sql>
    
    
    <sql name="FIND_USER_PW_SQL">
        <description>사용자 PW찾기</description>
        <query>
            <![CDATA[
             SELECT id, user_id, email, nickname, name, delete_y_n, input_date  
             FROM USER 
             WHERE user_id = ? 
               AND name = ? 
               AND email = ? 
               AND delete_y_n = 0 
            ]]>
        </query>
    </sql>
    
    
</sqls>